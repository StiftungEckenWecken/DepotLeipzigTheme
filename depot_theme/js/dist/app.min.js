!function r(s,i,l){function c(t,e){if(!i[t]){if(!s[t]){var o="function"==typeof require&&require;if(!e&&o)return o(t,!0);if(d)return d(t,!0);var a=new Error("Cannot find module '"+t+"'");throw a.code="MODULE_NOT_FOUND",a}var n=i[t]={exports:{}};s[t][0].call(n.exports,function(e){return c(s[t][1][e]||e)},n,n.exports,r,s,i,l)}return i[t].exports}for(var d="function"==typeof require&&require,e=0;e<l.length;e++)c(l[e]);return c}({1:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var a=function(){function a(e,t){for(var o=0;o<t.length;o++){var a=t[o];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,o){return t&&a(e.prototype,t),o&&a(e,o),e}}();var n=function(){function d(e,a){var n=this,t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),"NaN"!==parseFloat(a.maps_default_lat)&&"NaN"!==parseFloat(a.maps_default_lng))if(void 0!==a.maps_app_id&&void 0!==a.maps_app_code)if("undefined"!=typeof H){var o=new H.service.Platform({app_id:a.maps_app_id,app_code:a.maps_app_code,useHTTPS:!0}).createDefaultLayers(),r=new H.Map(e,o.normal.map,{zoom:12,center:{lat:parseFloat(a.maps_default_lat),lng:parseFloat(a.maps_default_lng)}}),s=(new H.mapevents.Behavior(new H.mapevents.MapEvents(r)),H.ui.UI.createDefault(r,o,"de-DE")),i=new H.map.Group;r.addObject(i);var l=void 0;if(i.addEventListener("tap",function(e){var t=new H.ui.InfoBubble(e.target.getPosition(),{content:e.target.getData()});l&&s.removeBubble(l),l=t,s.addBubble(t),r.setCenter(e.target.getPosition()),r.zoomAt(14)},!1),t){var c={};t.forEach(function(e){var t=e.lat.toString()+e.lng.toString();void 0!==c[t]?(c[t],c[t]++):c[t]=1,console.log(c[t]);var o=new H.map.DomMarker({lat:e.lat,lng:e.lng},{icon:n._generateDomMarker()});o.setData('<p>\n                                <a href="/ressourcen/'+e.slug+'"\n                                 title="'+a.t_map_open_resource+'"\n                                 target="_blank">\n                                    '+e.title+"\n                                </a> - "+e.adress+"\n                                </p>"),i.addObject(o)})}}else console.log("depot-maps.js - WARNING: No maps assets loaded. Will abort");else console.log("depot-maps.js - WARNING: Missing API credentials");else console.log("depot-maps.js - WARNING: Got none or invalid HERE maps credentials")}return a(d,[{key:"_generateDomMarker",value:function(){var e=document.createElement("div"),t=document.createElement("div");e.style.userSelect="none",e.style.webkitUserSelect="none",e.style.msUserSelect="none",e.style.mozUserSelect="none",e.style.cursor="pointer",e.style.opacity=.75,t.style.width="30px",t.style.height="32px",t.style.marginTop="-16px",t.style.marginLeft="-15px",e.appendChild(t),t.innerHTML='<img src="/sites/all/themes/depot_theme/images/marker.png" />';var a=function(e){e.target.style.opacity=.75},n=function(e){e.target.style.opacity=1};return new H.map.DomIcon(e,{onAttach:function(e,t,o){e.addEventListener("mouseover",n),e.addEventListener("mouseout",a)},onDetach:function(e,t,o){e.removeEventListener("mouseover",n),e.removeEventListener("mouseout",a)}})}}]),d}();o.default=n},{}],2:[function(e,t,o){"use strict";var a,d,u,p,n=e("./depot-maps"),f=(a=n)&&a.__esModule?a:{default:a};d=jQuery,u=window,p=window.document,Drupal.behaviors.depot={attach:function(e,t){function n(e){return e.replace(/^\//,"").replace(/(index|default).[a-zA-Z]{3,4}$/,"").replace(/\/$/,"")}var r=n(location.pathname);if(d('a[href*="#"]').each(function(){var e=n(this.pathname)||r,t=this.hash;if(d("#"+t.replace(/#/,"")).length&&r===e&&(location.hostname===this.hostname||!this.hostname)&&this.hash.replace(/#/,"")){var o=d(t),a=this.hash;a&&d(this).click(function(e){e.preventDefault(),d("html, body").animate({scrollTop:o.offset().top},1e3,function(){if(location.hash=a,o.focus(),o.is(":focus"))return!1;o.attr("tabindex","-1"),o.focus()})})}}),d("#main-menu",e).once("toggle_region_select",function(){d("#main-menu__region-selected").click(function(){var e=d(this);e.addClass("active-trail"),d("#depot-region-select").css({left:e.offset().left,top:e.height()}).show(),d("#depot-region-select .close-popup").click(function(){d("#depot-region-select").hide(),e.removeClass("active-trail")})})}),1<=d(".form-item-field-fake-kategorie").length){var a=d("#edit-field-fake-kategorie");a.select2({placeholder:t.depot.t_addKategorienPlaceholder,maximumSelectionLength:3});var o=function(){for(var e=a.select2("data"),t=0;3!==t;t++){var o=void 0!==e[t]?e[t].id:"";d("#edit-field-kategorie-und-"+t+"-state-id").val(o)}};a.on("select2:select",o).on("select2:unselect",o)}if(1===d("#depot-resources-map").length&&d("#depot-resources-map",e).once("add-map",function(){new f.default(p.getElementById("depot-resources-map"),t.depot,depotResourceMarkers)}),d("body").hasClass("section-ressourcen")&&!d("body").hasClass("page-ressourcen-edit")&&(d("#availability_calendar_btn").click(function(){return"undefined"!=typeof cal&&"function"==typeof cal.show?cal.show():console.log("depot.js - ATTENTION: Missing or corrupt resourceCal settings"),!1}),"undefined"!=typeof depotResourceMarker?d("#open-resource-map").click(function(){d(p).scrollTop(0),""===d("#depot-resource-map").html()&&u.setTimeout(function(){t.depot.maps_default_lat=depotResourceMarker[0].lat,t.depot.maps_default_lng=depotResourceMarker[0].lng,new f.default(p.getElementById("depot-resource-map"),t.depot,depotResourceMarker)},1e3)}):console.log("depot.js - ATTENTION: No map rendered as geodata is missing")),1<=d(".depot-resources-list").length||1<=d(".depot-resources-list__no-results").length){d("#edit-kategorie-id option").first().remove(),d("#edit-kategorie-id").select2({placeholder:t.depot.t_filterKategorienPlaceholder,maximumSelectionLength:1,multiple:!0,tags:!1,language:"de"}),d(".depot-resources-list__no-results-reset-filter").click(function(){d("#edit-kategorie-id").val(null).trigger("change")}),d("#edit-kategorie-id-wrapper").addClass("medium-8 column"),d("#views-exposed-form-resources-list-default").on("change",function(e){return console.log("chaaaange form!"),!1}),d("#edit-kategorie-id").on("selection:update",function(e){console.log("update")}),d("#edit-kategorie-id").on("select2:selecting",function(e){e.params.data}),Drupal.settings.views.ajaxViews.views_dom_id_startpage.view_display_id="page";var s=0;d(".depot-resources-list .resource-wrapper").each(function(e,t){9<=e&&d(t).addClass("hide"),s=e}),d("#depot-resources-list__btn-expand").click(function(){return d(this).addClass("hide"),d(".depot-resources-list .resource-wrapper.hide, #depot-resources-list__btn-show-more").removeClass("hide"),!1}),s<=9&&d("#depot-resources-list__btn-expand").trigger("click")}d('#edit-field-links-i input[type="text"]').keyup(function(){1<=d(this).val().length&&d("#edit-field-links-ii").removeClass("hide")}),d('#edit-field-links-ii input[type="text"]').keyup(function(){1<=d(this).val().length&&d("#edit-field-links-iii").removeClass("hide")}),d(".fieldset-toggle legend").click(function(){d(this).closest(".fieldset-toggle").toggleClass("toggled")}),d("body").hasClass("section-ressourcen")&&1<u.location.pathname.search("av")&&d("#verfuegbarkeitenModal").trigger("click");var i=d(".follow-box");if(0<i.length&&641<d(u).width()){for(var l=[],c=0;c<i.length;c++)l.push({element:i[c],offset:d(i[c]).offset()});d(u).scroll(function(e){for(var t=d(e.currentTarget).scrollTop(),o=0;o<l.length;o++){var a=i.height()+30;t>l[o].offset.top?(d(l[o].element).addClass("follow"),a<t?d(l[o].element).addClass("fade-out"):d(l[o].element).removeClass("fade-out")):d(l[o].element).removeClass("follow").removeClass("fade-out")}})}}}},{"./depot-maps":1}]},{},[1,2]);