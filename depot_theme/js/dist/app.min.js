!function r(a,s,l){function c(t,e){if(!s[t]){if(!a[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(u)return u(t,!0);var o=new Error("Cannot find module '"+t+"'");throw o.code="MODULE_NOT_FOUND",o}var i=s[t]={exports:{}};a[t][0].call(i.exports,function(e){return c(a[t][1][e]||e)},i,i.exports,r,a,s,l)}return s[t].exports}for(var u="function"==typeof require&&require,e=0;e<l.length;e++)c(l[e]);return c}({1:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}();var i=function(){function d(e,i){var r=this,t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),"NaN"!==parseFloat(i.maps_default_lat)&&"NaN"!==parseFloat(i.maps_default_lng))if(void 0!==i.maps_app_id&&void 0!==i.maps_app_code)if("undefined"!=typeof H){var n=new H.service.Platform({app_id:i.maps_app_id,app_code:i.maps_app_code,useHTTPS:!0}).createDefaultLayers(),o=new H.Map(e,n.normal.map,{zoom:12,center:{lat:parseFloat(i.maps_default_lat),lng:parseFloat(i.maps_default_lng)}}),a=-1;o.addEventListener("mapviewchangeend",function(e){a++});new H.mapevents.Behavior(new H.mapevents.MapEvents(o));var s=H.ui.UI.createDefault(o,n,"de-DE"),l=new H.map.Group;o.addObject(l);var c=void 0;if(l.addEventListener("tap",function(e){var t=new H.ui.InfoBubble(e.target.getPosition(),{content:e.target.getData()});c&&s.removeBubble(c),c=t,s.addBubble(t),o.setCenter(e.target.getPosition()),0===a&&o.zoomAt(14)},!1),t){var u={};t.forEach(function(e){var t=0,n=e.lat.toString()+e.lng.toString();void 0!==u[n]?(t=u[n],e.lng=e.lng+1.0001*t/3e3,u[n]++):u[n]=1;var o=new H.map.DomMarker({lat:e.lat,lng:e.lng},{icon:r._generateDomMarker()});o.setData('<p>\n                                <a href="/ressourcen/'+e.slug+'"\n                                 title="'+i.t_map_open_resource+'"\n                                 target="_blank">\n                                    '+e.title+"\n                                </a> - "+e.adress+"\n                                </p>"),l.addObject(o)})}}else console.log("depot-maps.js - WARNING: No maps assets loaded. Will abort");else console.log("depot-maps.js - WARNING: Missing API credentials");else console.log("depot-maps.js - WARNING: Got none or invalid HERE maps credentials")}return o(d,[{key:"_generateDomMarker",value:function(){var e=document.createElement("div"),t=document.createElement("div");e.style.userSelect="none",e.style.webkitUserSelect="none",e.style.msUserSelect="none",e.style.mozUserSelect="none",e.style.cursor="pointer",e.style.opacity=.75,t.style.width="30px",t.style.height="32px",t.style.marginTop="-16px",t.style.marginLeft="-15px",e.appendChild(t),t.innerHTML='<img src="/sites/all/themes/depot_theme/images/marker.png" />';var o=function(e){e.target.style.opacity=.75},i=function(e){e.target.style.opacity=1};return new H.map.DomIcon(e,{onAttach:function(e,t,n){e.addEventListener("mouseover",i),e.addEventListener("mouseout",o)},onDetach:function(e,t,n){e.removeEventListener("mouseover",i),e.removeEventListener("mouseout",o)}})}}]),d}();n.default=i},{}],2:[function(e,t,n){"use strict";var o,u,d,p,f,i=e("./depot-maps"),m=(o=i)&&o.__esModule?o:{default:o};e("os");u=jQuery,d=window,p=window.document,f=void 0,Drupal.behaviors.depot={attach:function(e,r){function i(e){return e.replace(/^\//,"").replace(/(index|default).[a-zA-Z]{3,4}$/,"").replace(/\/$/,"")}var a=i(location.pathname);if(u('a[href*="#"]').each(function(){var e=i(this.pathname)||a,t=this.hash.replace("#%22","");if(u("#"+t.replace(/#/,"")).length&&a===e&&(location.hostname===this.hostname||!this.hostname)&&this.hash.replace(/#/,"")){var n=u(t),o=this.hash;o&&u(this).click(function(e){e.preventDefault(),u("html, body").animate({scrollTop:n.offset().top},1e3,function(){if(location.hash=o,n.focus(),n.is(":focus"))return!1;n.attr("tabindex","-1"),n.focus()})})}}),u("#main-menu",e).once("toggle_region_select",function(){u("__#main-menu__region-selected").click(function(){var e=u(this);e.addClass("active-trail"),u("#depot-region-select").css({left:e.offset().left,top:e.height()}).show(),u("#depot-region-select .close-popup").click(function(){u("#depot-region-select").hide(),e.removeClass("active-trail")})})}),1<=u(".form-item-field-fake-kategorie").length){var o=u("#edit-field-fake-kategorie");o.select2({placeholder:r.depot.t_addKategorienPlaceholder,maximumSelectionLength:3});var t=function(){for(var e=o.select2("data"),t=0;3!==t;t++){var n=void 0!==e[t]?e[t].id:"";u("#edit-field-kategorie-und-"+t+"-state-id").val(n)}};o.on("select2:select",t).on("select2:unselect",t)}if(1===u("#depot-resources-map").length&&u("#depot-resources-map",e).once("add-map",function(){new m.default(p.getElementById("depot-resources-map"),r.depot,depotResourceMarkers)}),!u("body").hasClass("section-ressourcen")||u("body").hasClass("page-ressourcen-edit")||u("#resources-list-selectize").length||(0<=location.hash.indexOf("#sperrzeiten")&&u("#openVerfuegbarkeitenModal").click(),u("#availability_calendar_btn").click(function(){if("undefined"!=typeof cal&&"function"==typeof cal.show)return cal.show(),!1;console.log("depot.js - ATTENTION: Missing or corrupt resourceCal settings")}),"undefined"!=typeof depotResourceMarker?u("#open-resource-map").click(function(){u(p).scrollTop(0),""===u("#depot-resource-map").html()&&d.setTimeout(function(){r.depot.maps_default_lat=depotResourceMarker[0].lat,r.depot.maps_default_lng=depotResourceMarker[0].lng,new m.default(p.getElementById("depot-resource-map"),r.depot,depotResourceMarker)},1e3)}):console.log("depot.js - ATTENTION: No map rendered as geodata is missing")),1<=u(".view-resources-list").length){u("body",e).once("resources-list-selectize",function(){u("body").hasClass("section-ressourcen")&&u("#main-content").prepend(u("#resources-list-selectize"));var e=[];u("#edit-kategorie-id option").each(function(){e.push({value:u(this).val(),text:u(this).html().replace(/&amp;/,"&")})});var t=u("#resources-list-selectize select").selectize({delimiter:",",persist:!1,maxItems:2,options:e,placeholder:r.depot.t_filterKategorienPlaceholder,closeAfterSelect:!0,selectOnTab:!0,create:function(e){return{value:e,text:e}},render:{option_create:function(e,t){if(3<=t(e.input).toString().length)return'<div class="create">Nach Schlagwort "<strong>'+t(e.input)+'</strong>" suchen&hellip;</div>'}}});(f=t[0].selectize).on("option_add",function(e,t){u("#resources-list-selectize__clear").removeClass("hide"),u("#edit-kategorie-id").val([]),u('input[name="query"]').val(e).trigger("change")}),f.on("clear",function(){u("#resources-list-selectize__clear").addClass("hide"),u('input[name="query"]').val(""),u("#edit-kategorie-id").val([]).trigger("change")}),f.on("item_remove",function(e){f.trigger("option_remove",e)}),f.on("option_remove",function(e){isNaN(e)?u('input[name="query"]').val(""):u("#edit-kategorie-id").val([]).trigger("change")}),f.on("item_add",function(e,t){u("#resources-list-selectize__clear").removeClass("hide");var n="category";if(isNaN(e)){if(n="query",t.addClass("is-tag-item"),1<u(".selectize-input .item.is-tag-item").length){var o=u(".selectize-input .item.is-tag-item").first().attr("data-value");f.removeOption(o)}}else{if(1<u(".selectize-input .item").not(".is-tag-item").length){var i=u(".selectize-input .item").not(".is-tag-item").first().attr("data-value");f.removeOption(i)}u("#edit-name").val(""),u("#edit-kategorie-id").val(e).trigger("change")}t.html().toString().indexOf("item-type")<0&&t.html(t.html()+' <span class="item-type">'+r.depot["t_search_type_"+n]+"</span>")}),u("#resources-list-selectize__clear").click(function(){f.clear()})}),void 0!==Drupal.settings.views.ajaxViews.views_dom_id_startpage&&void 0!==Drupal.settings.views.ajaxViews.views_dom_id_startpage.view_display_id&&(Drupal.settings.views.ajaxViews.views_dom_id_startpage.view_display_id="page"),u(".depot-resources-list__no-results-reset-filter").click(function(){f.clear()});var n=0;u(".view-resources-list .resource-wrapper").each(function(e,t){9<=e&&u(t).addClass("hide"),n=e}),u("#depot-resources-list__btn-expand").click(function(){return u(this).addClass("hide"),u(".view-resources-list .resource-wrapper.hide, #depot-resources-list__btn-show-more").removeClass("hide"),!1}),n<=9&&u("#depot-resources-list__btn-expand").trigger("click")}u('#edit-field-links-i input[type="text"]').keyup(function(){1<=u(this).val().length&&u("#edit-field-links-ii").removeClass("hide")}),u('#edit-field-links-ii input[type="text"]').keyup(function(){1<=u(this).val().length&&u("#edit-field-links-iii").removeClass("hide")}),u(".fieldset-toggle legend").click(function(){u(this).closest(".fieldset-toggle").toggleClass("toggled")}),u("body").hasClass("section-ressourcen")&&1<d.location.pathname.search("av")&&u("#verfuegbarkeitenModal").trigger("click");var s=u(".follow-box");if(0<s.length&&641<u(d).width()){for(var l=[],c=0;c<s.length;c++)l.push({element:s[c],offset:u(s[c]).offset()});u(d).scroll(function(e){for(var t=u(e.currentTarget).scrollTop(),n=0;n<l.length;n++){var o=s.height()+30;t>l[n].offset.top?(u(l[n].element).addClass("follow"),o<t?u(l[n].element).addClass("fade-out"):u(l[n].element).removeClass("fade-out")):u(l[n].element).removeClass("follow").removeClass("fade-out")}})}}}},{"./depot-maps":1,os:3}],3:[function(e,t,n){n.endianness=function(){return"LE"},n.hostname=function(){return"undefined"!=typeof location?location.hostname:""},n.loadavg=function(){return[]},n.uptime=function(){return 0},n.freemem=function(){return Number.MAX_VALUE},n.totalmem=function(){return Number.MAX_VALUE},n.cpus=function(){return[]},n.type=function(){return"Browser"},n.release=function(){return"undefined"!=typeof navigator?navigator.appVersion:""},n.networkInterfaces=n.getNetworkInterfaces=function(){return{}},n.arch=function(){return"javascript"},n.platform=function(){return"browser"},n.tmpdir=n.tmpDir=function(){return"/tmp"},n.EOL="\n",n.homedir=function(){return"/"}},{}]},{},[1,2]);